<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/recipes/show.css" />
<%- include('../partials/nav') %>
<div class="author">Author:  <a href="/profiles/<%= recipe.owner._id %>"><%= recipe.owner.name %> </a>
<!-- <img 
    class="profile-avatar"
    src="<%= recipe.owner.avatar %>" >  -->
  </div>
<h1>Recipe Details:  <a href="/recipes/<%= recipe.id %>/edit">Edit Recipe</a></h1>

<section class="details">
<div>Dish Name: <%= recipe.name %> </div>
<div>Difficulty Level: <%= recipe.difficulty %> </div>
<div>Time Needed: <%= recipe.time %> minutes </div>
<div>Tasty? <%= recipe.tasty ? "Certified Tasty" : "Not Very Tasty" %> </div>
<div>Cuisine Type: <%= recipe.cuisine %> </div>
<div>Ingredients:</div>
<ul>
  <ul>
    <% recipe.ingredients.forEach(ingredient => { %>
      <li>
      <form 
      action="/recipes/<%= recipe._id %>/ingredients/<%= ingredient._id%>?_method=DELETE"
      method="POST">
      <a href="/recipes/<%= recipe._id %>"><%= ingredient.name %></a>     
    
      <button type="submit">X</button>
    </form>
  </li>
    <% }) %>
  </ul>
</ul>

<form id="add-ingredients" action="/recipes/<%= recipe._id %>/ingredients" method="POST">
  <select name="ingredientId">
    <% ingredients.forEach(ingredient => { %>
      <option value="<%= ingredient._id %>"><%= ingredient.name %></option>
    <% }) %>
  </select>
  <button type="submit">Add ingredient to recipe</button>
</form>
</section>
 <div class="comment">
<h3>Comments:</h3>

<h4> <form action="/recipes/<%= recipe._id %>/comments" method="POST">
  <input type="text" name="comment">
  <button type="submit">Add Comment</button>
</form></h4>
<h4>
  <% recipe.comments.forEach(function(comment) { %> 
      <li><%=comment.comment %> - <%= recipe.owner.name  %>  </li>
    <% }) %> 
</h4>
</div>
<%- include('../partials/footer') %>